{"ast":null,"code":"import _regeneratorRuntime from \"/Users/ethanshan/PycharmProjects/omingle-front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/ethanshan/PycharmProjects/omingle-front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"/Users/ethanshan/PycharmProjects/omingle-front-end/src/pages/play/gameRoom/gameRoom.jsx\";\nimport React from \"react\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport MainGrid from \"./components/mainGrid\";\nimport axios from \"axios\";\nimport { withRouter } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst queryString = require('query-string');\n\nconst _require = require('twilio-video'),\n      connect = _require.connect; // const useStyles = (theme) => ({\n//   root: {\n//     display: \"flex\",\n//     flexDirection: \"column\",\n//     minHeight: \"100vh\"\n//   },\n//   main: {\n//     marginTop: theme.spacing(8),\n//     marginBottom: theme.spacing(2),\n//     backgroundColor: \"red\"\n//   },\n//   mainGrid: {\n//     flexGrow: 1,\n//     backgroundColor: \"red\",\n//     marginTop: theme.spacing(2),\n//     marginBottom: theme.spacing(2)\n//     // width:\n//   },\n//   paper: {\n//     height: 140,\n//     width: 100\n//   }\n// });\n\n\nclass GameRoom extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      accessToken: null,\n      room: null\n    };\n    this.joinRoom = this.joinRoom.bind(this);\n  }\n\n  joinRoom() {\n    var _this = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var room;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return connect(_this.state.accessToken, {\n              audio: true // video: true\n\n            });\n\n          case 3:\n            room = _context.sent;\n\n            _this.setState({\n              room: room\n            }, () => console.log('connection success'));\n\n            _context.next = 10;\n            break;\n\n          case 7:\n            _context.prev = 7;\n            _context.t0 = _context[\"catch\"](0);\n            console.log(_context.t0);\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, null, [[0, 7]]);\n    }))();\n  }\n\n  componentDidMount() {\n    const parsed = queryString.parse(this.props.location.search);\n    console.log(parsed);\n    this.setState({\n      accessToken: parsed.accessToken\n    }, () => this.joinRoom());\n  }\n\n  render() {\n    return this.state.room ? /*#__PURE__*/_jsxDEV(MainGrid, {\n      videoRoom: this.state.room\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 25\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Connecting\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 68\n    }, this);\n  }\n\n}\n\nexport default _c = withRouter(GameRoom);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["/Users/ethanshan/PycharmProjects/omingle-front-end/src/pages/play/gameRoom/gameRoom.jsx"],"names":["React","withStyles","MainGrid","axios","withRouter","queryString","require","connect","GameRoom","Component","constructor","props","state","accessToken","room","joinRoom","bind","audio","setState","console","log","componentDidMount","parsed","parse","location","search","render"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,0BAA3B;AAEA,OAAOC,QAAP,MAAqB,uBAArB;AAEA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,SAASC,UAAT,QAA2B,kBAA3B;;;AAEA,MAAMC,WAAW,GAAGC,OAAO,CAAC,cAAD,CAA3B;;iBAEoBA,OAAO,CAAC,cAAD,C;MAAnBC,O,YAAAA,O,EAGR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,MAAMC,QAAN,SAAuBR,KAAK,CAACS,SAA7B,CAAuC;AACrCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACXC,MAAAA,WAAW,EAAE,IADF;AAEXC,MAAAA,IAAI,EAAE;AAFK,KAAb;AAIA,SAAKC,QAAL,GAAgB,KAAKA,QAAL,CAAcC,IAAd,CAAmB,IAAnB,CAAhB;AACD;;AAEKD,EAAAA,QAAQ,GAAG;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAEMR,OAAO,CAAC,KAAI,CAACK,KAAL,CAAWC,WAAZ,EAAyB;AACjDI,cAAAA,KAAK,EAAE,IAD0C,CAEjD;;AAFiD,aAAzB,CAFb;;AAAA;AAEPH,YAAAA,IAFO;;AAOb,YAAA,KAAI,CAACI,QAAL,CAAc;AAAEJ,cAAAA,IAAI,EAAEA;AAAR,aAAd,EAA8B,MAAMK,OAAO,CAACC,GAAR,CAAY,oBAAZ,CAApC;;AAPa;AAAA;;AAAA;AAAA;AAAA;AASbD,YAAAA,OAAO,CAACC,GAAR;;AATa;AAAA;AAAA;AAAA;AAAA;AAAA;AAWhB;;AAEDC,EAAAA,iBAAiB,GAAG;AAClB,UAAMC,MAAM,GAAGjB,WAAW,CAACkB,KAAZ,CAAkB,KAAKZ,KAAL,CAAWa,QAAX,CAAoBC,MAAtC,CAAf;AACAN,IAAAA,OAAO,CAACC,GAAR,CAAYE,MAAZ;AACA,SAAKJ,QAAL,CAAc;AACZL,MAAAA,WAAW,EAAES,MAAM,CAACT;AADR,KAAd,EAEG,MAAM,KAAKE,QAAL,EAFT;AAGD;;AAEDW,EAAAA,MAAM,GAAG;AACP,WACE,KAAKd,KAAL,CAAWE,IAAX,gBAAkB,QAAC,QAAD;AAAU,MAAA,SAAS,EAAE,KAAKF,KAAL,CAAWE;AAAhC;AAAA;AAAA;AAAA;AAAA,YAAlB,gBAA6D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAD/D;AAGD;;AAnCoC;;AAwCvC,oBAAeV,UAAU,CAACI,QAAD,CAAzB","sourcesContent":["import React from \"react\";\nimport { withStyles } from \"@material-ui/core/styles\";\n\nimport MainGrid from \"./components/mainGrid\";\n\nimport axios from \"axios\";\n\nimport { withRouter } from 'react-router-dom';\n\nconst queryString = require('query-string');\n\nconst { connect } = require('twilio-video');\n\n\n// const useStyles = (theme) => ({\n//   root: {\n//     display: \"flex\",\n//     flexDirection: \"column\",\n//     minHeight: \"100vh\"\n//   },\n//   main: {\n//     marginTop: theme.spacing(8),\n//     marginBottom: theme.spacing(2),\n//     backgroundColor: \"red\"\n//   },\n//   mainGrid: {\n//     flexGrow: 1,\n//     backgroundColor: \"red\",\n//     marginTop: theme.spacing(2),\n//     marginBottom: theme.spacing(2)\n//     // width:\n//   },\n//   paper: {\n//     height: 140,\n//     width: 100\n//   }\n// });\n\nclass GameRoom extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      accessToken: null,\n      room: null\n    }\n    this.joinRoom = this.joinRoom.bind(this);\n  }\n\n  async joinRoom() {\n    try {\n      const room = await connect(this.state.accessToken, {\n        audio: true,\n        // video: true\n      });\n\n      this.setState({ room: room }, () => console.log('connection success'));\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  componentDidMount() {\n    const parsed = queryString.parse(this.props.location.search);\n    console.log(parsed);\n    this.setState({\n      accessToken: parsed.accessToken\n    }, () => this.joinRoom());\n  }\n\n  render() {\n    return (\n      this.state.room ? <MainGrid videoRoom={this.state.room} /> : <div>Connecting</div>\n    );\n  }\n\n\n}\n\nexport default withRouter(GameRoom);\n"]},"metadata":{},"sourceType":"module"}